import{_ as n,c as l,j as t,a as s,a3 as a,o as i}from"./chunks/framework.D_seZniL.js";const E=JSON.parse('{"title":"层叠","description":"","frontmatter":{"date":"2024-07-31 19:54:24","title":"层叠","lastUpdated":"2024-08-23 20:23:18"},"headers":[],"relativePath":"_posts/笔记/css/层叠.md","filePath":"_posts/笔记/css/层叠.md","lastUpdated":1725864037000}'),o={name:"_posts/笔记/css/层叠.md"},r={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.131ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 500 888","aria-hidden":"true"},p={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.131ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 500 888","aria-hidden":"true"},g={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},m={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.294ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 572 453","aria-hidden":"true"},x={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.109ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 490 647","aria-hidden":"true"},c={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.052ex",height:"1.025ex",role:"img",focusable:"false",viewBox:"0 -442 465 453","aria-hidden":"true"};function Q(T,e,y,f,b,w){return i(),l("div",null,[e[22]||(e[22]=t("p",null,"一个dom元素的样式来源可以有很多， 比如开发者定义的、浏览器默认的, 或者有多个选择器选中了同一个元素; 当多个来源中的属性有重合时， 究竟应用哪个来源中的属性， 这是css的核心问题。",-1)),e[23]||(e[23]=t("p",null,[s("层叠是css的核心， 从"),t("code",null,"层叠样式表"),s("这个名字上就能看出来, 它是一个定义了如何合并来自多个源的属性值的算法。")],-1)),e[24]||(e[24]=t("h2",{id:"重要性-importance",tabindex:"-1"},[s("重要性(Importance) "),t("a",{class:"header-anchor",href:"#重要性-importance","aria-label":'Permalink to "重要性(Importance)"'},"​")],-1)),e[25]||(e[25]=t("p",null,[s("重要性是凌驾于所有其他层叠规则之上的方法， 通过在属性值后加"),t("code",null,"!important"),s("， 将这条css属性声明 设置为"),t("strong",null,"important"),s("的。")],-1)),t("ul",null,[e[7]||(e[7]=t("li",null,[t("code",null,"important"),s("的属性一定覆盖"),t("code",null,"normal"),s("属性")],-1)),t("li",null,[e[2]||(e[2]=s("当都声明为")),e[3]||(e[3]=t("code",null,"!important",-1)),e[4]||(e[4]=s("或者都没有声明为")),e[5]||(e[5]=t("code",null,"!important",-1)),e[6]||(e[6]=s("时， 往下走吧")),t("mjx-container",r,[(i(),l("svg",d,e[0]||(e[0]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mo"},[t("path",{"data-c":"2193",d:"M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z",style:{"stroke-width":"3"}})])])],-1)]))),e[1]||(e[1]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"↓")])],-1))])])]),e[26]||(e[26]=a('<h2 id="源-origin" tabindex="-1">源(Origin) <a class="header-anchor" href="#源-origin" aria-label="Permalink to &quot;源(Origin)&quot;">​</a></h2><p>一般的， css的源被分为三类:</p><table tabindex="0"><thead><tr><th>类别</th><th>描述</th></tr></thead><tbody><tr><td>用户代理/浏览器样式表(<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade#user-agent_stylesheets" target="_blank" rel="noreferrer">User-agent stylesheets</a>)</td><td>浏览器样式表是是浏览器提供的默认样式。每个浏览器都有一套自己的默认样式，用于在未明确指定样式时显示HTML元素。例如，大多数浏览器会默认将<code>&lt;h1&gt;</code>元素显示为大号加粗字体，<code>&lt;a&gt;</code>元素显示为蓝色并在鼠标悬停时下划线等。这些默认样式的目的是为了在没有CSS的情况下提供一个基本的、可读的文档结构。</td></tr><tr><td>作者/开发者样式表(<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade#author_stylesheets" target="_blank" rel="noreferrer">Author stylesheets</a>)</td><td>web开发者为文档设置的样式， 定义了网页的外观。</td></tr><tr><td>用户样式表(<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Cascade#user_stylesheets" target="_blank" rel="noreferrer">User stylesheets</a>)</td><td>Web 浏览器允许用户编写 CSS 样式表，浏览器使用这些样式表来覆盖页面设计者所做的样式选择。但目前几乎被淘汰，如chrome不再支持。究其原因， 现代的网页早以不像是古早时候只是一个结构简单文档, 而是变成了应用程序。开发者样式越来越复杂越来越完善, 定义用户样式大概率不会让网页更好， 反而是破坏了网页的正常效果、设计主题。 所谓用户样式， 到现在， 只在markdown这样的简单排版文档里还有存活空间。</td></tr></tbody></table><p>层叠的顺序如下图:</p><table tabindex="0"><thead><tr><th style="text-align:left;">Order (low to high)</th><th style="text-align:left;">Origin</th><th style="text-align:left;">Importance</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">user-agent (browser)</td><td style="text-align:left;">normal</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">user</td><td style="text-align:left;">normal</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">author (developer)</td><td style="text-align:left;">normal</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;">CSS @keyframe animations</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">author (developer)</td><td style="text-align:left;"><code>!important</code></td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;">user</td><td style="text-align:left;"><code>!important</code></td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;">user-agent (browser)</td><td style="text-align:left;"><code>!important</code></td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;">CSS transitions</td><td style="text-align:left;"></td></tr></tbody></table><p>可以看到， 当开发者样式与浏览器样式冲突时， 开发者样式的优先级更高； 但当应用了<code>!important</code>时， 结果将相反， 应用了<code>!important</code>的开发者样式无法覆盖应用了<code>!improtant</code>的浏览器样式。</p>',6)),t("p",null,[e[10]||(e[10]=s("当源相同时， 那么继续往下走")),t("mjx-container",p,[(i(),l("svg",h,e[8]||(e[8]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mo"},[t("path",{"data-c":"2193",d:"M473 86Q483 86 483 67Q483 63 483 61T483 56T481 53T480 50T478 48T474 47T470 46T464 44Q428 35 391 14T316 -55T264 -168Q264 -170 263 -173T262 -180T261 -184Q259 -194 251 -194Q242 -194 238 -176T221 -121T180 -49Q169 -34 155 -21T125 2T95 20T67 33T44 42T27 47L21 49Q17 53 17 67Q17 87 28 87Q33 87 42 84Q158 52 223 -45L230 -55V312Q230 391 230 482T229 591Q229 662 231 676T243 693Q244 694 251 694Q264 692 270 679V-55L277 -45Q307 1 353 33T430 76T473 86Z",style:{"stroke-width":"3"}})])])],-1)]))),e[9]||(e[9]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mo",{stretchy:"false"},"↓")])],-1))])]),e[27]||(e[27]=a(`<h2 id="优先级-specificity" tabindex="-1">优先级(Specificity) <a class="header-anchor" href="#优先级-specificity" aria-label="Permalink to &quot;优先级(Specificity)&quot;">​</a></h2><p>当css属性具有相同的源(origin)时， 我们会开始为css属性计算得到一个优先级， 优先级高的会覆盖掉优先级低的。</p><h3 id="行内样式" tabindex="-1">行内样式 <a class="header-anchor" href="#行内样式" aria-label="Permalink to &quot;行内样式&quot;">​</a></h3><p>一般来说所有css在一个样式表环境里； 但在web开发者的角色里， 还可以为dom元素设置行内样式。</p><p>行内样式总会覆盖外部样式表的任何样式，因此可看作是具有最高的优先级。</p><h3 id="优先级计算" tabindex="-1">优先级计算 <a class="header-anchor" href="#优先级计算" aria-label="Permalink to &quot;优先级计算&quot;">​</a></h3><p>优先级的计算原则是: 选择器越具体， 优先级越高。</p><p>比如</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">#text {...}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">p {...}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">p</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>这里的两个选择器都能选择这个<code>p</code>元素， 但一个是标签选择器， 泛泛地选中了文档中所有的p标签； 而<code>#text</code>选中具有<code>id=text</code>的元素， 要比标签选择具体的非常多。 在这种情况下， id选择器的优先级比标签选择器要高。</p><hr><p>选择器的优先级被量化为一个长度为3的元组: <code>(x, y, z)</code>， 进行字典序比较。</p><blockquote><p>这里的<em>字典序比较</em>可能造成误解。</p><p>这里的<strong>字典序比较</strong>指的是， 索引小的权重大的比较方式， 只有当前位相同才会比较下一位。</p><p>比如<code>[2, 1, 1] &gt; [1, 3, 3]</code>， 因为首位<code>2 &gt; 1</code></p><p>比如<code>[2, 2, 1] &gt; [2, 1, 3]</code>, 因为首位相同， 所以比较第二位， <code>2 &gt; 1</code></p></blockquote><p>优先级元组<code>(x, y, z)</code>中三个位置分别代表的意义是 :</p>`,14)),t("ul",null,[t("li",null,[t("mjx-container",g,[(i(),l("svg",m,e[11]||(e[11]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})])])],-1)]))),e[12]||(e[12]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"x")])],-1))]),e[13]||(e[13]=s(": 选择器中")),e[14]||(e[14]=t("code",null,"ID",-1)),e[15]||(e[15]=s("选择器的数量"))]),t("li",null,[t("mjx-container",x,[(i(),l("svg",k,e[16]||(e[16]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D466",d:"M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)]))),e[17]||(e[17]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"y")])],-1))]),e[18]||(e[18]=s(":选择器中 (类选择器、属性选择器、伪类选择器)的数量"))]),t("li",null,[t("mjx-container",c,[(i(),l("svg",u,e[19]||(e[19]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D467",d:"M347 338Q337 338 294 349T231 360Q211 360 197 356T174 346T162 335T155 324L153 320Q150 317 138 317Q117 317 117 325Q117 330 120 339Q133 378 163 406T229 440Q241 442 246 442Q271 442 291 425T329 392T367 375Q389 375 411 408T434 441Q435 442 449 442H462Q468 436 468 434Q468 430 463 420T449 399T432 377T418 358L411 349Q368 298 275 214T160 106L148 94L163 93Q185 93 227 82T290 71Q328 71 360 90T402 140Q406 149 409 151T424 153Q443 153 443 143Q443 138 442 134Q425 72 376 31T278 -11Q252 -11 232 6T193 40T155 57Q111 57 76 -3Q70 -11 59 -11H54H41Q35 -5 35 -2Q35 13 93 84Q132 129 225 214T340 322Q352 338 347 338Z",style:{"stroke-width":"3"}})])])],-1)]))),e[20]||(e[20]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"z")])],-1))]),e[21]||(e[21]=s(": 选择器中(标签选择器、伪元素选择器)的数量"))])]),e[28]||(e[28]=a(`<p>给出以下例子帮助了解</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (1, 0, 0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.box</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (0, 1, 0)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (0, 0, 1)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#app</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> .box</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (1, 1, 0)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#app</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> .list</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;"> a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (1, 1, 1)</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">a</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">:hover</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (0, 1, 1)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">#app::before</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (1, 0, 1)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.item.selected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {...} // (0, 2, 0)</span></span></code></pre></div><h2 id="继承-inheritance" tabindex="-1">继承(inheritance) <a class="header-anchor" href="#继承-inheritance" aria-label="Permalink to &quot;继承(inheritance)&quot;">​</a></h2><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to &quot;参考&quot;">​</a></h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Cascade" target="_blank" rel="noreferrer">CSS 层叠 - CSS：层叠样式表 | MDN (mozilla.org)</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance" target="_blank" rel="noreferrer">层叠、优先级与继承 - 学习 Web 开发 | MDN (mozilla.org)</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Specificity" target="_blank" rel="noreferrer">优先级 - CSS：层叠样式表 | MDN (mozilla.org)</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Cascade_layers" target="_blank" rel="noreferrer">Cascade layers - Learn web development | MDN (mozilla.org)</a></p><p><a href="https://www.thoughtco.com/user-style-sheet-3469931" target="_blank" rel="noreferrer">什么是用户样式表？ (thoughtco.com)</a></p>`,9))])}const C=n(o,[["render",Q]]);export{E as __pageData,C as default};
